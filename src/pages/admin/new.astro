---
// Check authentication
const validPassword = "admin123"; // Same as before
const inputPassword = Astro.url.searchParams.get('password');

if (inputPassword !== validPassword) {
  return Astro.redirect('/admin/login');
}
---
<html>
<head>
  <title>New Post</title>
  <!-- Quill Editor CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; }
    #editor { height: 300px; margin: 1rem 0; border: 1px solid #ddd; }
    button { background: #4CAF50; color: white; border: none; padding: 0.5rem 1rem; }
  </style>
</head>
<body>
  <h1>✏️ New Post</h1>
  <a href="/admin?password=admin123" style="color: #666;">← Back</a>

  <form id="post-form" action="/api/create-post" method="POST">
    <input type="hidden" name="password" value={inputPassword}>
    
    <div style="margin: 1rem 0;">
      <label style="display: block; margin-bottom: 0.5rem;">Title:</label>
      <input type="text" name="title" required style="width: 100%; padding: 0.5rem;">
    </div>

    <div id="editor"></div>
    <input type="hidden" name="content" id="content">

    <button type="submit">Publish Post</button>
  </form>

  <!-- Quill JS -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script>
    const quill = new Quill('#editor', {
      theme: 'snow',
      placeholder: 'Write your post here...'
    });

    document.getElementById('post-form').onsubmit = function() {
      document.getElementById('content').value = quill.root.innerHTML;
    };
  </script>
</body>
</html>