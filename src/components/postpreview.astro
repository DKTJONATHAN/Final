---
// src/components/PostPreview.astro
interface Props {
  post: {
    slug: string;
    data: {
      title: string;
      description: string;
      publishDate: Date;
      category: string;
      image?: {
        src: string;
        alt: string;
      };
    };
  };
}

const { post } = Astro.props;

function getImageUrl() {
  return post.data.image?.src || '/Jonathan-Mwaniki-logo.png';
}
---

<a 
  href={`/posts/${post.slug}`} 
  class="group block overflow-hidden rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300"
>
  <div class="h-48 overflow-hidden bg-gray-100 flex items-center justify-center">
    <img 
      src={getImageUrl()}" 
      alt={post.data.image?.alt || post.data.title}
      class={`w-full h-full ${!post.data.image?.src ? 'object-contain p-8' : 'object-cover'} group-hover:scale-105 transition-transform duration-300`}
      loading="lazy"
    />
  </div>
  <div class="p-4">
    <div class="flex justify-between items-center mb-2">
      <span class="text-sm text-gray-500">
        {new Date(post.data.publishDate).toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        })}
      </span>
      <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
        {post.data.category}
      </span>
    </div>
    <h2 class="text-xl font-bold mb-2 group-hover:text-blue-600">
      {post.data.title}
    </h2>
    <p class="text-gray-600 line-clamp-2">
      {post.data.description}
    </p>
  </div>
</a>